<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="David Betteridge">
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Expenses - Technical Documentation</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/extra.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
	
	<script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../..">Technical Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="../..">PROACTIS</a>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">P2P <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../sso/">Single Sign On (SSO)</a>
</li>
                            
<li >
    <a href="../punchout/">PunchOut / Marketplaces</a>
</li>
                            
<li >
    <a href="../nominalvalidation/">Nominal Validation</a>
</li>
                            
<li >
    <a href="../budgetchecking/">Budget Checking</a>
</li>
                            
<li >
    <a href="../customtab/">Custom Tabs</a>
</li>
                            
<li >
    <a href="../addins/">Addins</a>
</li>
                            
  <li class="dropdown-submenu">
    <a href="#">Imaging Integration</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../genericimaging/">Generic Imaging</a>
</li>
            
<li >
    <a href="../customimaging/">Custom Imaging</a>
</li>
    </ul>
  </li>
                            
<li >
    <a href="../commitments/">Commitment Posting</a>
</li>
                            
<li >
    <a href="../invoicePosting/">Invoice Posting</a>
</li>
                            
  <li class="dropdown-submenu">
    <a href="#">Import APIs</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../acceptanceGateway/">Acceptances</a>
</li>
            
<li class="active">
    <a href="./">Expenses</a>
</li>
    </ul>
  </li>
                        </ul>
                    </li>
                    <li >
                        <a href="../../placeholder/">Spend Analytics</a>
                    </li>
                    <li >
                        <a href="../../placeholder/">APF</a>
                    </li>
                    <li >
                        <a href="../../placeholder/">S2C</a>
                    </li>
                    <li >
                        <a href="../../placeholder/">DueNorth</a>
                    </li>
                    <li >
                        <a href="../../placeholder/">System4</a>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../acceptanceGateway/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../../placeholder/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/proactis-documentation/ExampleApplications">CodeExamples
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#expenses-gateway">Expenses Gateway</a></li>
            <li><a href="#summary">Summary</a></li>
            <li><a href="#process-overview">Process Overview</a></li>
            <li><a href="#limitations-of-the-gateway">Limitations of the Gateway</a></li>
            <li><a href="#worked-example">Worked Example</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="expenses-gateway">Expenses Gateway</h1>
<h2 id="summary">Summary</h2>
<p>This document describes the structure of the XML file used for importing Expense Claims into PROACTIS.  It is assumed that the reader of the document is familiar both with XML and PROACTIS expense claims.</p>
<p>The document also describes the validation rules, which must be passed in order for the claim to be imported, and the current limitations of the expense claim gateway.</p>
<p>This document should be used in conjunction with the <strong>ImportExpenseClaims.xsd</strong> xml schema.</p>
<h2 id="process-overview">Process Overview</h2>
<p>The process of importing expense claims is very similar to the existing master-data (suppliers/items/nominals) and purchase invoice and order xml gateways.</p>
<p>First the user generates an xml document containing the details of the expense claim(s) to be imported.  This xml must conform to the <strong>ImportExpenseClaims.xsd</strong> schema document.</p>
<p>The xml is then validated, first to ensure it conforms to the schema and then to check the supplied data is valid.  For instance does the template exist?</p>
<p>The expense claim is then created within PROACTIS using the existing expenses engine.  This allows the gateway to use the existing PROACTIS functionality.</p>
<h2 id="limitations-of-the-gateway">Limitations of the Gateway</h2>
<p>Although the Expense Claim XML gateway mimics the PROACTIS web application wherever possible, it is subject to the following limitations.</p>
<h3 id="companies">Companies</h3>
<p>As with the other XML gateways, an XML document can only contain documents for a single company.</p>
<h3 id="departments">Departments</h3>
<p>As with the other XML gateways, an XML document can only contain documents for a single department.</p>
<h3 id="language">Language</h3>
<p>The schema, documentation and error messages are all written in English.</p>
<h3 id="actions">Actions</h3>
<p>This XML gateway only supports the creation and submission of expense claims.  It does not allow users to amend, authorise or cancel expense claims.</p>
<h2 id="worked-example">Worked Example</h2>
<p>This section of the document walks you through the creation of a simple document.  All the available fields are described in complete detail, within the next section.</p>
<h3 id="xml-document">XML Document</h3>
<p>The xml document must start with the following to lines</p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; ?&gt;
&lt;pro:Import xmlns:pro=&quot;[http://www.proactis.com/xml/xml-ns](http://www.proactis.com/xml/xml-ns)&quot;&gt;
</code></pre>

<p>And finish with</p>
<pre><code class="xml">&lt;/pro:Import&gt;
</code></pre>

<h3 id="control-block">Control Block</h3>
<p>A control block must then be included so that the gateway knows which database and company to import the documents into.  This has the same structure as the control block for the other XML gateways.</p>
<p>An example control block is shown below.</p>
<pre><code class="xml"> &lt;pro:Control DatabaseName=&quot;PROACTIS&quot;
              UserName=&quot;DAVIDBETTERIDGE&quot;
              Password=&quot;mysecret&quot;
              Company=&quot;MAIN&quot;
              Department=&quot;SOLUTIONS&quot;
              Version=&quot;1.0.0&quot; /&gt;
</code></pre>

<p>The XML gateway supports NT authentication, an example is shown below.</p>
<pre><code class="xml"> &lt;pro:Control    DatabaseName=&quot;PROACTIS\_LIVE&quot;
                 AuthenticationMethod=&quot;WINDOWS&quot;
                 Company=&quot;MAIN&quot;
                 Department=&quot;SOLUTIONS&quot;
                 Version=&quot;1.0.0&quot; /&gt;
</code></pre>

<p>NB: The value of the <strong>AuthenticationMethod</strong> field can be WINDOWS or PROACTIS (which must be expressed in Upper Case).  If this field is missing, the gateway will default to PROACTIS and work as before.</p>
<h3 id="expense-claims">Expense Claims</h3>
<p>The next section contains the details of the expense claims to be imported.  The gateway allows multiple claims to be included in a single xml document.  At least one expense claim must be included.</p>
<pre><code class="xml">&lt;pro:ExpenseClaim Template = &quot;EXP&quot;
                  Title = &quot;Pen and Paper&quot; 
                  ClaimDate=&quot;2017-08-18&quot;
                  ClaimFor=&quot;Anderson&quot;
                  SaveMethod=&quot;SUBMIT&quot; /&gt;  
</code></pre>

<h3 id="template">@Template</h3>
<p>This attribute is optional if the user only has access to a single template.  However, it is recommended that a value is explicitly supplied where possible.</p>
<h3 id="claimdate">@ClaimDate</h3>
<p>This attribute is optional and will default to today's date if missing.  Must be in the format yyyy-mm-dd</p>
<h3 id="comments">Comments</h3>
<p>Any number of comments may be added onto the claim.</p>
<pre><code class="xml">&lt;pro:Comments&gt;
  &lt;pro:Comment&gt;&quot;Please pay quickly&quot;&lt;/pro:Comment&gt;
  &lt;pro:Comment&gt;&quot;BarCode: 1232&quot; &lt;/pro:Comment&gt;
&lt;/pro:Comments&gt;
</code></pre>

<h3 id="items">Items</h3>
<p>The claim must contain one or more item lines.</p>
<pre><code class="xml">&lt;pro:Items&gt;
  &lt;pro:Item PROACTISCode='LTP001'
            Price='1002.35'
            Quantity='1'
            Description='Laptop'
            Receipt='YES'
            TaxReceipt='YES'
            TaxCode='C1' /&gt;
&lt;pro:Items&gt;
</code></pre>

<h3 id="nominals">Nominals</h3>
<p>Each item on the claim must contain one or more nominals</p>
<pre><code class="xml">&lt;pro:Nominals&gt;
  &lt;pro:Nominal AccountingElement1='113'
               NominalMask='Advertising'
               Ratio='1'/&gt;
&lt;/pro:Nominals&gt;
</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>(C) PROACTIS Group Ltd - All Rights Reserved</p>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script><div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
