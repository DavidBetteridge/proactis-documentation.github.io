<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="David Betteridge">
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Cancel Purchase Order - Technical Documentation</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/extra.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
	
	<script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../..">Technical Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="../..">PROACTIS</a>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">P2P <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../sso/">Single Sign On (SSO)</a>
</li>
                            
<li >
    <a href="../punchout/">PunchOut / Marketplaces</a>
</li>
                            
<li >
    <a href="../nominalvalidation/">Nominal Validation</a>
</li>
                            
<li >
    <a href="../budgetchecking/">Budget Checking</a>
</li>
                            
<li >
    <a href="../customtab/">Custom Tabs</a>
</li>
                            
<li >
    <a href="../addins/">Addins</a>
</li>
                            
  <li class="dropdown-submenu">
    <a href="#">Imaging Integration</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../genericimaging/">Generic Imaging</a>
</li>
            
<li >
    <a href="../customimaging/">Custom Imaging</a>
</li>
    </ul>
  </li>
                            
<li >
    <a href="../commitments/">Commitment Posting</a>
</li>
                            
<li >
    <a href="../invoicePosting/">Invoice Posting</a>
</li>
                            
  <li class="dropdown-submenu">
    <a href="#">Import APIs</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../acceptanceGateway/">Acceptances</a>
</li>
            
<li class="active">
    <a href="./">Cancel Purchase Order</a>
</li>
            
<li >
    <a href="../expensesGateway/">Expenses</a>
</li>
            
<li >
    <a href="../purchaseCreditNoteGateway/">Purchase Credit Notes</a>
</li>
            
<li >
    <a href="../purchaseInvoiceGateway/">Purchase Invoices</a>
</li>
    </ul>
  </li>
                        </ul>
                    </li>
                    <li >
                        <a href="../../placeholder/">Spend Analytics</a>
                    </li>
                    <li >
                        <a href="../../placeholder/">APF</a>
                    </li>
                    <li >
                        <a href="../../placeholder/">S2C</a>
                    </li>
                    <li >
                        <a href="../../placeholder/">DueNorth</a>
                    </li>
                    <li >
                        <a href="../../placeholder/">System4</a>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../acceptanceGateway/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../expensesGateway/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/proactis-documentation/ExampleApplications">CodeExamples
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#cancel-purchase-order-gateway">Cancel Purchase Order Gateway</a></li>
            <li><a href="#summary">Summary</a></li>
            <li><a href="#process-overview">Process Overview</a></li>
            <li><a href="#worked-example">Worked Example</a></li>
            <li><a href="#errors">Errors</a></li>
            <li><a href="#example-code">Example Code</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="cancel-purchase-order-gateway">Cancel Purchase Order Gateway</h1>
<h2 id="summary">Summary</h2>
<p>This document describes how to cancel purchase orders using the PROACTIS web services.</p>
<p>It is assumed that the reader of the document is familiar both with XML and PROACTIS ordering.</p>
<p>The document also describes the validation rules, which must be passed in order for the order to be cancelled and any current limitations of the gateway.</p>
<p>This document should be used in conjunction with the <strong>AuthenticateUser.xsd</strong> xml schema</p>
<hr />
<h2 id="process-overview">Process Overview</h2>
<p>The following information is passed to the web service call</p>
<ul>
<li>An xml control block, which authenticates the user onto a PROACTIS database.</li>
<li>The purchase order to cancel</li>
<li>The reason why the order is being cancelled</li>
<li>Any additional comments.</li>
</ul>
<p>As with the front end, not all orders are in a state where they can be cancelled.  For example, a fully invoiced order can not be cancelled.</p>
<hr />
<h2 id="worked-example">Worked Example</h2>
<p>This section of the document walks you through the cancellation of a purchase order.</p>
<h3 id="authenticateuser-xml-document">AuthenticateUser XML Document</h3>
<p>The xml document must start with the following to lines</p>
<pre><code class="xml">&lt;?xml version=”1.0” ?&gt;  
  &lt;pro:AuthenticateUser xmlns:pro=”http://www.proactis.com/xml/xml-ns”&gt;
</code></pre>

<p>And finish with</p>
<pre><code class="xml">&lt;/pro: AuthenticateUser &gt;
</code></pre>

<h3 id="control-block">Control Block</h3>
<p>A control block must then be included so that the gateway knows which database and company to log into.  This has the same structure as the control block for the other XML gateways.</p>
<p>An example control block is shown below.</p>
<pre><code class="xml"> &lt;pro:Control DatabaseName=&quot;PROACTIS&quot;
              UserName=&quot;DAVIDBETTERIDGE&quot;
              Password=&quot;mysecret&quot;
              Company=&quot;MAIN&quot;
              Department=&quot;SOLUTIONS&quot;
              Version=&quot;1.0.0&quot; /&gt;
</code></pre>

<p>The XML gateway supports NT authentication, an example is shown below.</p>
<pre><code class="xml"> &lt;pro:Control    DatabaseName=&quot;PROACTIS\_LIVE&quot;
                 AuthenticationMethod=&quot;WINDOWS&quot;
                 Company=&quot;MAIN&quot;
                 Department=&quot;SOLUTIONS&quot;
                 Version=&quot;1.0.0&quot; /&gt;
</code></pre>

<p>NB: The value of the <strong>AuthenticationMethod</strong> field can be WINDOWS or PROACTIS (which must be expressed in Upper Case).  If this field is missing, the gateway will default to PROACTIS and work as before.</p>
<h3 id="web-services">Web Services</h3>
<p>There are two different web services available depending on how the purchase order will be identified.</p>
<h4 id="cancelorderbyguid">CancelOrderByGUID</h4>
<p>If you know the order's internal GUID; then the <strong>CancelOrderByGUID</strong> method should be used.
This method takes the following arguments:</p>
<ul>
<li>ControlXML</li>
<li>OrderGUID</li>
<li>CancellationReason</li>
<li>Comments</li>
</ul>
<h4 id="cancelorder">CancelOrder</h4>
<p>If you only know the order's document number; then the <strong>CancelOrder</strong> method should be used.
This method takes the following arguments:</p>
<ul>
<li>ControlXML</li>
<li>TemplateLabel</li>
<li>OrderNumber</li>
<li>DisplayNumber</li>
<li>CancellationReason</li>
<li>Comments</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The order can be identified by either of the following arguments:</p>
<ol>
<li>
<p>TemplateLabel and numeric Number</p>
</li>
<li>
<p>The DisplayNumber</p>
</li>
</ol>
<p>If the DisplayNumber is supplied, then the TemplateLabel and Number are ignored.</p>
</div>
<h3 id="cancellation-reason">Cancellation Reason</h3>
<p>The reason for cancellation the order must be supplied.  Reasons are defined in the List snap-in within the PROACTIS management console.</p>
<h3 id="comments">Comments</h3>
<p>Finally, any additional comments can be supplied.</p>
<h2 id="errors">Errors</h2>
<p>If the order does not exist,  or is not in a state where it can be cancelled then the gateway will throw the following fault:
<strong>The order is not available for cancellation</strong></p>
<h2 id="example-code">Example Code</h2>
<p>See the following example applications:</p>
<ul>
<li>
<p><a href="https://github.com/proactis-documentation/ExampleApplications/tree/master/P2P/Gateways/PROACTIS.ExampleApplication.CancelOrder">Cancel Order</a></p>
</li>
<li>
<p><a href="https://github.com/proactis-documentation/ExampleApplications/tree/master/P2P/Gateways/PROACTIS.ExampleApplication.CancelOrderByGUID">Cancel Order by GUID</a></p>
</li>
</ul></div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>(C) PROACTIS Group Ltd - All Rights Reserved</p>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script><div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
